
all: transition_charges_S0-S3.dat

# compute excited states with TD-DFT
ethene.out: ethene.gjf
	g09 < ethene.gjf | tee ethene.out
	formchk ethene.chk

# extract transition density for S0->S3 transition with `Multiwfn`
td_S0-S3.cube: ethene.out
	cat multiwfn.inp | Multiwfn ethene.fchk | tee multiwfn.out
	mv transdens.cub td_S0-S3.cube

# electrostatic potential generated by transition density
td_pot_S0-S3.cube: td_S0-S3.cube
	electrostatic_potential.py td_S0-S3.cube td_pot_S0-S3.cube --nuclear_potential=0 | tee electrostatic_potentia.out

# fit transition charges to electrostatic potential
transition_charges_S0-S3.dat: td_pot_S0-S3.cube
	 fit_electric_charges.py td_pot_S0-S3.cube transition_charges_S0-S3.dat | tee fit_electric_charges.out


clean:
	rm -f *.dat *.cube *.chk *.fchk *.out

